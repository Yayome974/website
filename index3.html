<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ma liste de course</title>
    <style>
      /* Vos styles CSS ici */
    </style>
  </head>
  <body>
    <h1>Ma liste de course</h1>
    
    <!-- Autres éléments de votre page -->

    <label for="new-checkbox" class="labeli"></label>
    <input type="text" id="new-checkbox" placeholder="Entrez un nom" />
    <button id="add-checkbox">Ajouter</button>
    <button id="undo-checkbox">Annuler la dernière tâche</button> <!-- Nouveau bouton -->

    <div class="checkbox-container" id="checkbox-container">
      <!-- Les cases à cocher seront ajoutées ici -->
    </div>

    <script>
      let lastCheckboxItem = null;

      function addCheckbox() {
        const checkboxContainer = document.getElementById("checkbox-container");
        const newCheckboxName = document.getElementById("new-checkbox").value;

        if (newCheckboxName.trim() !== "") {
          // Créer un div pour contenir la checkbox et son label
          const checkboxItem = document.createElement("div");
          checkboxItem.className = "checkbox-item";

          // Créer la checkbox
          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.id = newCheckboxName;
          checkbox.name = newCheckboxName;

          // Créer le label pour la checkbox
          const label = document.createElement("label");
          label.htmlFor = newCheckboxName;
          label.textContent = newCheckboxName;

          // Ajouter la checkbox et le label au div container
          checkboxItem.appendChild(checkbox);
          checkboxItem.appendChild(label);

          // Ajouter le div container à l'élément parent
          checkboxContainer.appendChild(checkboxItem);

          // Sauvegarder la référence à la dernière tâche ajoutée
          lastCheckboxItem = checkboxItem;

          // Réinitialiser le champ de texte
          document.getElementById("new-checkbox").value = "";
        }
      }

      function undoLastCheckbox() {
        if (lastCheckboxItem) {
          lastCheckboxItem.remove(); // Supprimer la dernière tâche ajoutée
          lastCheckboxItem = null; // Réinitialiser la référence
        }
      }

      document
        .getElementById("add-checkbox")
        .addEventListener("click", addCheckbox);

      // Ajouter l'événement pour annuler la dernière tâche
      document
        .getElementById("undo-checkbox")
        .addEventListener("click", undoLastCheckbox);

      // Ajout de la fonctionnalité pour détecter la touche "Entrée"
      document
        .getElementById("new-checkbox")
        .addEventListener("keydown", function (event) {
          if (event.key === "Enter") {
            addCheckbox();
            event.preventDefault(); // Empêche le comportement par défaut de soumission de formulaire
          }
        });
    </script>
  </body>
</html>
